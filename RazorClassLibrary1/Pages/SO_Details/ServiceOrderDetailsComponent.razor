@using FSA.Razor.Components.Components.Shared
@using RazorClassLibrary1.Services.HttpClientSrv.ServiceOrderRegisters.Create
@using RazorClassLibrary1.Services.HttpClientSrv.ServiceOrderRegisters.GetCurrent
@using RazorClassLibrary1.Services.HttpClientSrv.ServiceOrderTasksStates.GetAll
@inject IGetAllServiceOrderTasksStatesService GetAllServiceOrderTasksStatesService
@inject ICreateServiceOrderRegisterService CreateServiceOrderRegisterService
@inject IGetCurrentSORegisterByIdService GetCurrentSORegisterByIdService

<FadeIn>

    @* <RadzenTabs @bind-SelectedIndex=@selectedIndex> *@
    <RadzenTabs SelectedIndex="0">
        <Tabs>
            <RadzenTabsItem Text="@Localizer["BasicInfo"]" Icon="page_info">
                
                <RadzenStack Gap="1rem">

                    <RadzenRow>
                        <RadzenIcon Icon="room" /><RadzenColumn>@Localizer["Number"]</RadzenColumn>
                        <RadzenColumn Size="8">
                            @ServiceOrder.Number
                        </RadzenColumn>
                    </RadzenRow>

                    <RadzenRow>
                        <RadzenIcon Icon="room" /><RadzenColumn>@Localizer["EstimatedEndingDate"]</RadzenColumn>
                        <RadzenColumn Size="8">
                            @ServiceOrder.EstimatedEndingDate
                        </RadzenColumn>
                    </RadzenRow>

                    <RadzenRow>
                        <RadzenIcon Icon="room" /><RadzenColumn>@Localizer["Observations"]</RadzenColumn>
                        <RadzenColumn Size="8">
                            @ServiceOrder.Observations
                        </RadzenColumn>
                    </RadzenRow>

                    <RadzenRow>
                        <RadzenIcon Icon="room" /><RadzenColumn>@Localizer["Address"]</RadzenColumn>
                        <RadzenColumn Size="8">
                            @ServiceOrder.Address
                        </RadzenColumn>
                    </RadzenRow>

                </RadzenStack>

            </RadzenTabsItem>
            <RadzenTabsItem Text="@Localizer["Documents"]" Icon="cases">
                Orders
            </RadzenTabsItem>
            <RadzenTabsItem Text="@Localizer["Tasks"]" Icon="format_list_bulleted">
                Order Details
            </RadzenTabsItem>
            <RadzenTabsItem Text="@Localizer["Features"]" Icon="strategy">
                Order Details
            </RadzenTabsItem>
            <RadzenTabsItem Text="@Localizer["Registers"]" Icon="sweep">
                
                @* <h4>Modificar o status desta Ordem de Serviço</h4>

                <br/> *@
                <RadzenFieldset AllowCollapse="true" Style="width: 100%; margin: 40px auto;" ExpandTitle="Expand orders." CollapseTitle="Collapse orders."
                ExpandAriaLabel="Expand the list of orders." CollapseAriaLabel="Collapse the list of orders."
                Expand=@(() => Change("Fieldset expanded")) Collapse=@(() => Change("Fieldset collapsed"))>
                <HeaderTemplate>
                    <RadzenStack Orientation="Orientation.Horizontal" Gap="0.25rem">
                            <RadzenIcon Icon="account_box" /><b>Modificar o status desta Ordem de Serviço</b>
                    </RadzenStack>
                </HeaderTemplate>
                <ChildContent>

                <RadzenRow>
                    <RadzenText Text="Observations on the change of state" />
                </RadzenRow>
                <RadzenTextArea Placeholder="Observations" @bind-Value="@SORegisterObservations" />

                <RadzenSteps Change="@OnChange" SelectedIndex="selectedIndex">
                    <Steps>
                        @foreach (var item in SOStates)
                        {
                            <RadzenStepsItem Text=@item.Description Disabled="@string.IsNullOrEmpty(SORegisterObservations)" />
                        }
                    </Steps>
                </RadzenSteps>

                    </ChildContent>
                    <SummaryTemplate>
                        <RadzenCard class="rz-mt-4">
                            <b>Orders</b>
                        </RadzenCard>
                    </SummaryTemplate>
                </RadzenFieldset>

            </RadzenTabsItem>
        </Tabs>
    </RadzenTabs>
     
</FadeIn>